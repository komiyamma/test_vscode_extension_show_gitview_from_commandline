# プロジェクトの問題点と改善提案

このドキュメントは、`commandlineshowgitview` プロジェクトの現状分析と、特定された問題点、およびその改善提案をまとめたものです。

## 概要

このVSCode拡張機能は、`README.md`によると「コマンドラインからgitツールとして利用する際に便利」であることを目的としていますが、現在の実装は「VSCodeの起動時に常にソース管理（SCM）ビューを開く」という動作になっています。

この実装は、多くのユーザーにとって意図しない挙動である可能性が高く、パフォーマンスや使い勝手の観点からいくつかの問題を抱えています。

---

## 問題点一覧

### 1. 非効率なアクティベーションイベント

- **現状**: `package.json`の`activationEvents`に`onStartupFinished`が設定されています。これにより、VSCodeが起動するたびに、ユーザーの意図に関わらず拡張機能が有効化され、ソース管理ビューを開く処理が実行されます。
- **問題点**:
    - **パフォーマンス低下**: VSCodeの起動がわずかに遅延する可能性があります。
    - **不要な処理**: ユーザーがGitリポジトリでないフォルダを開いた場合や、ソース管理ビューを必要としない作業をしている場合でも、必ずビューが開かれてしまい、煩わしい体験につながります。
- **改善提案**: アクティベーションイベントを、コマンド実行をトリガーとする`onCommand`に変更します。
    - 例: `package.json`の`activationEvents`を`"onCommand:commandlineshowgitview.show"`のように変更し、`contributes.commands`セクションにコマンドを登録します。

### 2. ユーザーによる制御が不可能

- **現状**: 拡張機能の動作は完全に自動であり、ユーザーが機能を有効/無効にしたり、任意のタイミングで実行したりする手段が提供されていません。
- **問題点**: ユーザーは拡張機能の挙動をコントロールできず、常に同じ動作を強制されます。これは良いユーザーエクスペリエンスとは言えません。
- **改善提案**: コマンドパレットから実行可能なコマンドとして機能を提供します。
    - これにより、ユーザーは必要なときにだけ、意図してソース管理ビューを開くことができます。
    - 上記の`onCommand`への変更と同時に実装することが推奨されます。

### 3. テストコードの欠如

- **現状**: `package.json`には`test`スクリプトが存在しますが、プロジェクト内にテストコード（`*.test.ts`など）が含まれていません。
- **問題点**:
    - **品質保証の欠如**: 機能が正しく動作することを確認する自動化された手段がありません。
    - **リファクタリングへの耐性低下**: 将来的にコードの変更や機能追加を行う際に、意図しないバグ（デグレード）を混入させてしまうリスクが高まります。
- **改善提案**: 基本的なテストスイートを追加します。
    - 例えば、拡張機能がアクティベートされた際に、`vscode.commands.executeCommand`が期待通りに呼び出されることを確認する簡単なテストを実装します。

### 4. 不十分なドキュメント (`README.md`)

- **現状**: `README.md`には開発時の起動方法についての簡単な記述しかなく、この拡張機能が「誰の」「どのような課題を」「どのように解決するのか」が不明確です。
- **問題点**:
    - **目的の不明瞭さ**: ユーザーや他の開発者が、この拡張機能の価値を理解することが困難です。
    - **使い方の欠如**: （改善提案通りコマンドに変更した場合）ユーザーがどのように機能を使えばよいのかを知る術がありません。
- **改善提案**: `README.md`を拡充し、以下の項目を追記します。
    - **この拡張機能について**: プロジェクトの目的や解決する課題。
    - **主な機能**: 具体的な機能の一覧。
    - **使い方**: コマンドの実行方法など。
    - **設定項目**: （もしあれば）設定可能な項目。

### 5. 目的と実装の乖離

- **現状**: プロジェクト名 (`commandlineshowgitview`) は「コマンドライン」からの利用を示唆していますが、実際の実装はVSCodeの起動イベントにフックしているだけで、コマンドラインでの利用に特化した機能は含まれていません。
- **問題点**: 名称と実際の機能が一致しておらず、ユーザーに誤解を与える可能性があります。
- **改善提案**:
    - もし本当にコマンドラインからの利用を想定しているのであれば、そのための具体的なロジック（例：特定の引数を受け取った場合のみ動作する）を実装します。
    - そうでない場合は、拡張機能の名称と説明を、実際の機能（例：「ソース管理ビューをコマンドで開く」）に合わせてより分かりやすいものに変更します。
